{"version":3,"file":"applicationinsights.js","sourceRoot":"","sources":["../applicationinsights.ts"],"names":[],"mappings":"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","sourcesContent":["import CorrelationContextManager = require(\"./AutoCollection/CorrelationContextManager\"); // Keep this first\nimport AutoCollectConsole = require(\"./AutoCollection/Console\");\nimport AutoCollectExceptions = require(\"./AutoCollection/Exceptions\");\nimport AutoCollectPerformance = require(\"./AutoCollection/Performance\");\nimport AutoCollectHttpDependencies = require(\"./AutoCollection/HttpDependencies\");\nimport AutoCollectHttpRequests = require(\"./AutoCollection/HttpRequests\");\nimport Config = require(\"./Library/Config\");\nimport Context = require(\"./Library/Context\");\nimport CorrelationIdManager = require(\"./Library/CorrelationIdManager\");\nimport Logging = require(\"./Library/Logging\");\nimport Util = require(\"./Library/Util\");\nimport QuickPulseClient = require(\"./Library/QuickPulseStateManager\");\n\nimport { AutoCollectNativePerformance, IDisabledExtendedMetrics } from \"./AutoCollection/NativePerformance\";\n\n// We export these imports so that SDK users may use these classes directly.\n// They're exposed using \"export import\" so that types are passed along as expected\nexport import TelemetryClient = require(\"./Library/NodeClient\");\nexport import Contracts = require(\"./Declarations/Contracts\");\n\nexport enum DistributedTracingModes {\n    /**\n     * (Default) Send Application Insights correlation headers\n     */\n\n    AI=0,\n\n    /**\n     * Send both W3C Trace Context headers and back-compatibility Application Insights headers\n     */\n    AI_AND_W3C\n}\n\n// Default autocollection configuration\nlet _isConsole = true;\nlet _isConsoleLog = false;\nlet _isExceptions = true;\nlet _isPerformance = true;\nlet _isRequests = true;\nlet _isDependencies = true;\nlet _isDiskRetry = true;\nlet _isCorrelating = true;\nlet _forceClsHooked: boolean;\nlet _isSendingLiveMetrics = false; // Off by default\nlet _isNativePerformance = true;\nlet _disabledExtendedMetrics: IDisabledExtendedMetrics;\n\nlet _diskRetryInterval: number = undefined;\nlet _diskRetryMaxBytes: number = undefined;\n\nlet _console: AutoCollectConsole;\nlet _exceptions: AutoCollectExceptions;\nlet _performance: AutoCollectPerformance;\nlet _nativePerformance: AutoCollectNativePerformance;\nlet _serverRequests: AutoCollectHttpRequests;\nlet _clientRequests: AutoCollectHttpDependencies;\n\nlet _isStarted = false;\n\n/**\n* The default client, initialized when setup was called. To initialize a different client\n* with its own configuration, use `new TelemetryClient(instrumentationKey?)`.\n*/\nexport let defaultClient: TelemetryClient;\nexport let liveMetricsClient: QuickPulseClient;\nlet _performanceLiveMetrics: AutoCollectPerformance;\n\n/**\n * Initializes the default client. Should be called after setting\n * configuration options.\n *\n * @param instrumentationKey the instrumentation key to use. Optional, if\n * this is not specified, the value will be read from the environment\n * variable APPINSIGHTS_INSTRUMENTATIONKEY.\n * @returns {Configuration} the configuration class to initialize\n * and start the SDK.\n */\nexport function setup(instrumentationKey?: string) {\n    if(!defaultClient) {\n        defaultClient = new TelemetryClient(instrumentationKey);\n        _console = new AutoCollectConsole(defaultClient);\n        _exceptions = new AutoCollectExceptions(defaultClient);\n        _performance = new AutoCollectPerformance(defaultClient);\n        _serverRequests = new AutoCollectHttpRequests(defaultClient);\n        _clientRequests = new AutoCollectHttpDependencies(defaultClient);\n        if (!_nativePerformance) {\n            _nativePerformance = new AutoCollectNativePerformance(defaultClient);\n        }\n    } else {\n        Logging.info(\"The default client is already setup\");\n    }\n\n    if (defaultClient && defaultClient.channel) {\n        defaultClient.channel.setUseDiskRetryCaching(_isDiskRetry, _diskRetryInterval, _diskRetryMaxBytes);\n    }\n\n    return Configuration;\n}\n\n/**\n * Starts automatic collection of telemetry. Prior to calling start no\n * telemetry will be *automatically* collected, though manual collection\n * is enabled.\n * @returns {ApplicationInsights} this class\n */\nexport function start() {\n    if(!!defaultClient) {\n        _isStarted = true;\n        _console.enable(_isConsole, _isConsoleLog);\n        _exceptions.enable(_isExceptions);\n        _performance.enable(_isPerformance);\n        _nativePerformance.enable(_isNativePerformance, _disabledExtendedMetrics);\n        _serverRequests.useAutoCorrelation(_isCorrelating, _forceClsHooked);\n        _serverRequests.enable(_isRequests);\n        _clientRequests.enable(_isDependencies);\n        if (liveMetricsClient && _isSendingLiveMetrics) {\n            liveMetricsClient.enable(_isSendingLiveMetrics);\n        }\n    } else {\n        Logging.warn(\"Start cannot be called before setup\");\n    }\n\n    return Configuration;\n}\n\n/**\n * Returns an object that is shared across all code handling a given request.\n * This can be used similarly to thread-local storage in other languages.\n * Properties set on this object will be available to telemetry processors.\n *\n * Do not store sensitive information here.\n * Custom properties set on this object can be exposed in a future SDK\n * release via outgoing HTTP headers.\n * This is to allow for correlating data cross-component.\n *\n * This method will return null if automatic dependency correlation is disabled.\n * @returns A plain object for request storage or null if automatic dependency correlation is disabled.\n */\nexport function getCorrelationContext(): CorrelationContextManager.CorrelationContext {\n    if (_isCorrelating) {\n        return CorrelationContextManager.CorrelationContextManager.getCurrentContext();\n    }\n\n    return null;\n}\n\n/**\n * Returns a function that will get the same correlation context within its\n * function body as the code executing this function.\n * Use this method if automatic dependency correlation is not propagating\n * correctly to an asynchronous callback.\n */\nexport function wrapWithCorrelationContext<T extends Function>(fn: T): T {\n    return CorrelationContextManager.CorrelationContextManager.wrapCallback(fn);\n}\n\n/**\n * The active configuration for global SDK behaviors, such as autocollection.\n */\nexport class Configuration {\n    // Convenience shortcut to ApplicationInsights.start\n    public static start = start;\n\n     /**\n      * Sets the distributed tracing modes. If W3C mode is enabled, W3C trace context\n      * headers (traceparent/tracestate) will be parsed in all incoming requests, and included in outgoing\n      * requests. In W3C mode, existing back-compatibility AI headers will also be parsed and included.\n      * Enabling W3C mode will not break existing correlation with other Application Insights instrumented\n      * services. Default=AI\n     */\n    public static setDistributedTracingMode(value: DistributedTracingModes) {\n        CorrelationIdManager.w3cEnabled = value === DistributedTracingModes.AI_AND_W3C;\n        return Configuration;\n    }\n\n    /**\n     * Sets the state of console and logger tracking (enabled by default for third-party loggers only)\n     * @param value if true logger activity will be sent to Application Insights\n     * @param collectConsoleLog if true, logger autocollection will include console.log calls (default false)\n     * @returns {Configuration} this class\n     */\n    public static setAutoCollectConsole(value: boolean, collectConsoleLog: boolean = false) {\n        _isConsole = value;\n        _isConsoleLog = collectConsoleLog;\n        if (_isStarted){\n            _console.enable(value, collectConsoleLog);\n        }\n\n        return Configuration;\n    }\n\n    /**\n     * Sets the state of exception tracking (enabled by default)\n     * @param value if true uncaught exceptions will be sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    public static setAutoCollectExceptions(value: boolean) {\n        _isExceptions = value;\n        if (_isStarted){\n            _exceptions.enable(value);\n        }\n\n        return Configuration;\n    }\n\n    /**\n     * Sets the state of performance tracking (enabled by default)\n     * @param value if true performance counters will be collected every second and sent to Application Insights\n     * @param collectExtendedMetrics if true, extended metrics counters will be collected every minute and sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    public static setAutoCollectPerformance(value: boolean, collectExtendedMetrics: boolean | IDisabledExtendedMetrics = true) {\n        _isPerformance = value;\n        const extendedMetricsConfig = AutoCollectNativePerformance.parseEnabled(collectExtendedMetrics);\n        _isNativePerformance = extendedMetricsConfig.isEnabled;\n        _disabledExtendedMetrics = extendedMetricsConfig.disabledMetrics;\n        if (_isStarted) {\n            _performance.enable(value);\n            _nativePerformance.enable(extendedMetricsConfig.isEnabled, extendedMetricsConfig.disabledMetrics);\n        }\n\n\n        return Configuration;\n    }\n\n    /**\n     * Sets the state of request tracking (enabled by default)\n     * @param value if true requests will be sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    public static setAutoCollectRequests(value: boolean) {\n        _isRequests = value;\n        if (_isStarted) {\n            _serverRequests.enable(value);\n        }\n\n        return Configuration;\n    }\n\n    /**\n     * Sets the state of dependency tracking (enabled by default)\n     * @param value if true dependencies will be sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    public static setAutoCollectDependencies(value: boolean) {\n        _isDependencies = value;\n        if (_isStarted) {\n            _clientRequests.enable(value);\n        }\n\n        return Configuration;\n    }\n\n    /**\n     * Sets the state of automatic dependency correlation (enabled by default)\n     * @param value if true dependencies will be correlated with requests\n     * @param useAsyncHooks if true, forces use of experimental async_hooks module to provide correlation. If false, instead uses only patching-based techniques. If left blank, the best option is chosen for you based on your version of Node.js.\n     * @returns {Configuration} this class\n     */\n    public static setAutoDependencyCorrelation(value: boolean, useAsyncHooks?: boolean) {\n        _isCorrelating = value;\n        _forceClsHooked = useAsyncHooks;\n        if (_isStarted) {\n            _serverRequests.useAutoCorrelation(value, useAsyncHooks);\n        }\n\n        return Configuration;\n    }\n\n    /**\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\n     * Note that this method only applies to the default client. Disk-backed retry caching is disabled by default for additional clients.\n     * For enable for additional clients, use client.channel.setUseDiskRetryCaching(true).\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\n     * @param value if true events that occured while client is offline will be cached on disk\n     * @param resendInterval The wait interval for resending cached events.\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\n     * @returns {Configuration} this class\n     */\n    public static setUseDiskRetryCaching(value: boolean, resendInterval?: number, maxBytesOnDisk?: number) {\n        _isDiskRetry = value;\n        _diskRetryInterval = resendInterval;\n        _diskRetryMaxBytes = maxBytesOnDisk\n        if (defaultClient && defaultClient.channel){\n            defaultClient.channel.setUseDiskRetryCaching(value, resendInterval, maxBytesOnDisk);\n        }\n\n        return Configuration;\n    }\n\n    /**\n     * Enables debug and warning logging for AppInsights itself.\n     * @param enableDebugLogging if true, enables debug logging\n     * @param enableWarningLogging if true, enables warning logging\n     * @returns {Configuration} this class\n     */\n    public static setInternalLogging(enableDebugLogging = false, enableWarningLogging = true) {\n        Logging.enableDebug = enableDebugLogging;\n        Logging.disableWarnings = !enableWarningLogging;\n        return Configuration;\n    }\n\n    /**\n     * Enables communication with Application Insights Live Metrics.\n     * @param enable if true, enables communication with the live metrics service\n     */\n    public static setSendLiveMetrics(enable = false) {\n        if (!defaultClient) {\n            // Need a defaultClient so that we can add the QPS telemetry processor to it\n            Logging.warn(\"Live metrics client cannot be setup without the default client\");\n            return Configuration;\n        }\n\n        if (!liveMetricsClient) {\n            // No qps client exists. Create one and prepare it to be enabled at .start()\n            liveMetricsClient = new QuickPulseClient(defaultClient.config.instrumentationKey);\n            _performanceLiveMetrics = new AutoCollectPerformance(liveMetricsClient as any, 1000, true);\n            liveMetricsClient.addCollector(_performanceLiveMetrics);\n            defaultClient.quickPulseClient = liveMetricsClient; // Need this so we can forward all manual tracks to live metrics via PerformanceMetricsTelemetryProcessor\n            _isSendingLiveMetrics = enable;\n        } else {\n            // qps client already exists; enable/disable it\n            liveMetricsClient.enable(enable);\n        }\n\n        return Configuration;\n    }\n}\n\n/**\n * Disposes the default client and all the auto collectors so they can be reinitialized with different configuration\n*/\nexport function dispose() {\n    defaultClient = null;\n    _isStarted = false;\n    if (_console) {\n        _console.dispose();\n    }\n    if (_exceptions) {\n        _exceptions.dispose();\n    }\n    if (_performance) {\n        _performance.dispose();\n    }\n    if (_nativePerformance) {\n        _nativePerformance.dispose();\n    }\n    if(_serverRequests) {\n        _serverRequests.dispose();\n    }\n    if(_clientRequests) {\n        _clientRequests.dispose();\n    }\n}\n"]}